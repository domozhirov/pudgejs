!function(a){function d(a){var b=window.getComputedStyle(a,null).getPropertyValue(e("transform")),c=b.match(/matrix(?:(3d)\(-{0,1}\d+(?:, -{0,1}\d+)*(?:, (-{0,1}\d+))(?:, (-{0,1}\d+))(?:, (-{0,1}\d+)), -{0,1}\d+\)|\(-{0,1}\d+(?:, -{0,1}\d+)*(?:, (-{0,1}\d+))(?:, (-{0,1}\d+))\))/);return c?"3d"==c[1]?c.slice(2,5):(c.push(0),c=c.slice(5,8),{x:+c[0],y:+c[1],z:+c[2]}):[0,0,0]}function e(a){var b=document.createElement("div");if(a in b.style)return a;for(var c=["-moz-","-webkit-","-o-","-ms-"],d=0;d<c.length;++d){var e=c[d]+a;if(e in b.style)return e}}function f(a){return a.getBoundingClientRect()}function g(a){var b={x:null,y:null};return a=a.originalEvent||a||window.event,a=a.touches&&a.touches.length?a.touches[0]:a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:a,a.pageX?(b.x=a.pageX,b.y=a.pageY):(b.x=a.clientX,b.y=a.clientY),b}var b="pudgeJS",c=function(c,d){this.opt=a.extend({timing:"ease",duration:.3,button:!1,overlay:b+"-overlay",overlayCss:!0,slideToOpen:!0,slideToClose:!0,wrapper:!1},d),this.$elem=c,this.$win=a(window),this.$doc=a(document),this.$html=a(document.documentElement),this.$body=a(document.body),this.$overlay=a(this.opt.overlay),this.elemWidth=0,this.scrollTop=0,this.isOpened=!1,this.isIOS=/iPhone|iPad|iPod/i.test(navigator.userAgent)&&!window.MSStream,this.isRight=f(this.$elem[0]).left<this.$win.width()/2?-1:1,this.isTouch=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.msPointerEnabled=!("ontouchstart"in document),this.touchEvents={start:this.isTouch?this.msPointerEnabled?"MSPointerDown":"touchstart":"mousedown",move:this.isTouch?this.msPointerEnabled?"MSPointerMove":"touchmove":"mousemove",end:this.isTouch?this.msPointerEnabled?"MSPointerUp":"touchend touchcancel":"mouseup",all:this.isTouch?this.msPointerEnabled?"MSPointerDown MSPointerMove MSPointerUp":"touchstart touchmove touchend touchcancel":"mousedown mousemove mouseup"},this.direction=void 0,this.coord={sx:null,sy:null,mx:null,my:null,lx:null,ly:null,bx:null},this.moveSpeed=[],this._init()};c.prototype={_init:function(){this._onTouchDocument(),this._addOverlay(),this._onSliding()},open:function(){var c=this,d=c.opt.duration,e=c.opt.timing;if(arguments.length)for(var g=arguments.length-1;g>=0;g--)switch(typeof arguments[g]){case"string":d=arguments[g];break;case"number":e=arguments[g]}this.isOpened=!0,this.elemWidth=f(this.$elem[0]).width,animit(this.$overlay[0]).queue({opacity:2,visibility:"visible"},{duration:c.opt.duration,timing:c.opt.timing}).play(),animit(this.$elem[0]).queue({transform:"translate3d(0, 0 ,0)"},{duration:c.opt.duration,timing:c.opt.timing}).play(),this.$html.addClass("overflowHidden userSelect"),this.$elem.addClass(b+"-opened"),this.isIOS&&this.opt.wrapper&&!this.scrollTop&&(this.scrollTop=this.$html.scrollTop()||this.$body.scrollTop(),this.$body.addClass("overflowHidden userSelect"),a(this.opt.wrapper).css("top",-this.scrollTop))},close:function(){var c=this,d=c.opt.duration,e=c.opt.timing;if(arguments.length)for(var g=arguments.length-1;g>=0;g--)switch(typeof arguments[g]){case"string":d=arguments[g];break;case"number":e=arguments[g]}c.isOpened=!1,this.elemWidth=f(this.$elem[0]).width,animit(this.$overlay[0]).queue({opacity:0},{duration:c.opt.duration,timing:c.opt.timing}).play(),animit(this.$elem[0]).queue({transform:""},{duration:c.opt.duration,timing:c.opt.timing}).play(function(){c.isOpened||(c.$html.removeClass("overflowHidden userSelect"),c.$overlay.css("visibility","hidden")),c.isIOS&&c.opt.wrapper&&setTimeout(a.proxy(function(){c.$body.removeClass("overflowHidden userSelect"),a(this.opt.wrapper).css("top",0),a("html, body").scrollTop(this.scrollTop),this.scrollTop=0},c),100)}),c.$elem.removeClass(b+"-opened")},toggle:function(){return this.isOpened?this.close():this.open()},destroy:function(){this.isOpened=!1,this.$elem.removeAttr("style").removeClass(b+"-opened"),this.$overlay.css({visibility:"hidden",opacity:0}),this.$doc.off(this.touchEvents.start+"."+b),this.$elem.removeData(b)},update:function(b){this.opt=a.extend(this.opt,b)},_onTouchDocument:function(){var b=this,c=!1,d={sx:null,lx:null,sy:null,ly:null};b.$doc.on(this.touchEvents.all,function(e){a(e.target).closest(b.$elem).length||!b.isOpened||a(e.target).closest(b.opt.button).length||(/mousedown|touchstart|MSPointerDown/i.test(e.type)&&(c=!0,d.sx=Math.abs(g(e).x),d.sy=Math.abs(g(e).y)),/mouseup|touchend|MSPointerUp/i.test(e.type)&&c&&(c=!1,d.lx=Math.abs(g(e).x),d.ly=Math.abs(g(e).y),Math.abs(d.lx-d.sx)<5&&Math.abs(d.ly-d.sy)<5&&b.close()))})},_addOverlay:function(){var b;return a("."+this.opt.overlay).length?void(this.$overlay=a("."+this.opt.overlay)):void(this.opt.overlay&&(b=a('<div class="'+this.opt.overlay+'"/>'),b.addClass(this.opt.overlay),this.opt.overlayCss&&b.css({position:"fixed",zIndex:1,left:0,top:0,right:0,bottom:0,opacity:0,visibility:"hidden"}),this.$body.append(b),this.$overlay=b))},_onSliding:function(){function e(e){c.coord.sx=Math.abs(g(e).x),c.coord.sy=Math.abs(g(e).y),c.coord.bx=d(c.$elem[0]).x,c.elemWidth=f(c.$elem[0]).width,c.moveSpeed.push({s:c.coord.mx,t:Date.now()}),a(this).on(c.touchEvents.move+"."+b,h)}function h(a){function b(){var b=c.coord.mx-c.coord.sx;a.preventDefault(),b+=c.coord.bx,b>0&&!(c.isRight+1)?b=0:b<-c.elemWidth&&!(c.isRight+1)?b=-c.elemWidth:b<0&&c.isRight+1?b=0:b>c.elemWidth&&c.isRight+1&&(b=c.elemWidth),c.moveSpeed.push({s:c.coord.mx,t:Date.now()}),c.moveSpeed.length>5&&c.moveSpeed.shift(),c.$html.hasClass("overflowHidden userSelect")||c.$html.addClass("overflowHidden userSelect"),animit(c.$overlay[0]).queue({opacity:(c.elemWidth-Math.abs(b))/c.elemWidth,visibility:"visible",transition:"none",transform:"translateZ(0)"}).play(),animit(c.$elem[0]).queue({transform:"translate3d("+b+"px, 0 ,0)",transition:"none"}).play()}c.coord.mx=Math.abs(g(a).x),c.coord.my=Math.abs(g(a).y),"undefined"==typeof c.direction&&(c.direction=Math.abs(c.coord.mx-c.coord.sx)>Math.abs(c.coord.my-c.coord.sy)?"horizontal":"vertical"),(c.coord.sx<40&&!(c.isRight+1)||c.coord.sx>c.$win.width()-40&&c.isRight+1)&&!c.isIOS&&!c.isOpened&&"horizontal"===c.direction&&c.opt.slideToOpen&&b(),c.isOpened&&"horizontal"===c.direction&&c.opt.slideToClose&&b()}function i(d){var e,i,j,k,l,m;c.coord.lx=Math.abs(g(d).x),c.coord.ly=Math.abs(g(d).y),c.moveSpeed.length>1&&(e=c.moveSpeed.length,j=Math.abs(c.moveSpeed[e-1].s-c.moveSpeed[e-2].s),k=c.moveSpeed[e-1].t-c.moveSpeed[e-2].t,i=j/k,m=c.isRight+1?Math.abs(f(c.$elem[0]).right-c.$win.width()):Math.abs(f(c.$elem[0]).left),c.moveSpeed[e-1].s>c.moveSpeed[e-2].s&&!(c.isRight+1)?l="right":c.moveSpeed[e-1].s<c.moveSpeed[e-2].s&&!(c.isRight+1)?l="left":c.moveSpeed[e-1].s<c.moveSpeed[e-2].s&&c.isRight+1?l="left":c.moveSpeed[e-1].s>c.moveSpeed[e-2].s&&c.isRight+1&&(l="right"),i<=.1&&m<=c.elemWidth/2?c.open("cubic-bezier(0.1, 0.7, 0.1, 1)",.4):i<=.1&&m>c.elemWidth/2?c.close("cubic-bezier(0.1, 0.7, 0.1, 1)",.4):i>.1&&"left"===l&&!(c.isRight+1)?c.close("cubic-bezier(0.1, 0.7, 0.1, 1)",.4):i>.1&&"right"===l&&!(c.isRight+1)?c.open("cubic-bezier(0.1, 0.7, 0.1, 1)",.4):i>.1&&"right"===l&&c.isRight+1?c.close("cubic-bezier(0.1, 0.7, 0.1, 1)",.4):i>.1&&"left"===l&&c.isRight+1&&c.open("cubic-bezier(0.1, 0.7, 0.1, 1)",.4)),a(this).off(c.touchEvents.move+"."+b,h);for(var n in c.coord)c.coord[n]=null;c.moveSpeed=[],c.direction=void 0}var c=this;this.$doc.on(this.touchEvents.start+"."+b,e),this.$doc.on(this.touchEvents.end+"."+b,i)}},a.fn[b]=function(d,e){return this.each(function(){var g,f=a(this);(g=f.data(b))?"string"==typeof d&&g[d]?g[d](e):g.update(d):f.data(b,new c(f,d))})}}(jQuery);